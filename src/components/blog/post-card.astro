---
import { getImage } from 'astro:assets';
import type { ComponentProps } from 'astro/types';

import { parseAstroLocale } from '@/i18n/utils';

import defaultImg from './default.jpeg';
import { PostCard as PostCardUI } from './post-card';

type Props = Omit<ComponentProps<typeof PostCardUI>, 'image' | 'locale'>;

const locale = parseAstroLocale(Astro.currentLocale);
const props = Astro.props;

const image = await getImage({
  src: props.post.data.heroImage ?? defaultImg,
  width: 1200,
  height: 800,
});
---

<PostCardUI locale={locale} image={image} {...props} />
