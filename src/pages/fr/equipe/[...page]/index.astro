---
import { lunalink } from '@bearstudio/lunalink';
import type { GetStaticPathsOptions } from 'astro';

import { getCurrentTeamCollection } from '@/lib/team';
import Pagination from '@/components/pagination.astro';
import SEO from '@/components/seo/index.astro';
import MainLayout from '@/layouts/main-layout.astro';
import { ROUTES } from '@/routes.gen';

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const team = await getCurrentTeamCollection({ lang: 'fr' });
  return paginate(team, { pageSize: 12 });
}

const { page } = Astro.props;
---

<MainLayout>
  <!-- [TODO]: SEO -->
  <SEO
    slot="seo"
    title="Equipe de dÃ©veloppeurs, UX Designer et CTO en Normandie"
  />
  <div class="flex flex-1 flex-col lg:pt-20">
    <div class="mx-auto w-full max-w-screen-lg px-6 pb-20 lg:pt-20 lg:pb-0">
      <Pagination page={page}>
        <div class="grid gap-4 px-6 md:grid-cols-3">
          {
            page.data.map((person) => (
              <a
                href={lunalink(ROUTES.fr.equipe[':id'].__path, {
                  id: person.data._computed.slug,
                })}
              >
                {person.data.name}
              </a>
            ))
          }
        </div>
      </Pagination>
    </div>
  </div>
</MainLayout>
