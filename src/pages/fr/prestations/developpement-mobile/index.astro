---
import { getDataForPeopleCarousel } from '@/lib/people';
import { breadcrumbEntries } from '@/components/breadcrumb/utils';
import Container from '@/components/container.astro';
import HeroContent from '@/components/hero/hero-content.astro';
import Hero from '@/components/hero/hero.astro';
import { PeopleCarousel } from '@/components/people/people-carousel';
import Prose from '@/components/prose.astro';
import SEO from '@/components/seo/index.astro';
import { getAlternates } from '@/components/seo/utils';
import { getTranslationFn, parseAstroLocale } from '@/i18n/utils';
import MainLayout from '@/layouts/main-layout.astro';

import imgBg from './_bg.jpg';

const locale = parseAstroLocale(Astro.currentLocale);
const t = getTranslationFn(locale);

const people = (
  await getDataForPeopleCarousel({ locale, status: 'current' })
).filter((people) => people.data.services?.includes('mobile-development'));

const breadcrumb = breadcrumbEntries(locale)((entry) => [
  entry({
    label: t('services.root.breadcrumb'),
    path: '/fr/prestations',
    params: {},
  }),
  entry({
    label: t('services.mobileDevelopment.breadcrumb'),
    path: '/fr/prestations/developpement-mobile',
    params: {},
  }),
]);
---

<MainLayout>
  <SEO
    slot="seo"
    alternates={getAlternates('/fr/prestations/developpement-mobile', {})}
    breadcrumb={breadcrumb}
  />

  <Hero image={imgBg}>
    <HeroContent
      breadcrumb={breadcrumb}
      title={t('services.mobileDevelopment.title')}
      description={t('services.mobileDevelopment.description')}
    />
  </Hero>
  <Container>
    <Prose>
      <h2>Nos experts en d√©veloppement mobile</h2>
    </Prose>
    <PeopleCarousel client:load people={people} locale={locale} />
  </Container>
</MainLayout>
